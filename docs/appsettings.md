>[На главную](../README.md)

# Документация по конфигурационным настройкам приложения

## 1. Logging (базовая система логирования)

Отвечает за уровни логирования по умолчанию и для системных компонентов.

### Параметры

- **`LogLevel.Default`**  
  - *Тип:* строка  
  - *Значение по умолчанию:* `"Information"`  
  - *Описание:* базовый уровень логирования для всех компонентов приложения.

- **`LogLevel.Microsoft.AspNetCore`**  
  - *Тип:* строка  
  - *Значение:* `"Warning"`  
  - *Описание:* переопределяет уровень логирования для компонентов ASP.NET Core (только предупреждения и ошибки).

## 2. Serilog (расширенная система логирования)

Настраивает продвинутое логирование с несколькими приёмниками (sink).

### 2.1. MinimumLevel

Определяет минимальные уровни логирования.

- **`Default`**  
  - *Тип:* строка  
  - *Значение:* `"Information"`  
  - *Описание:* общий минимальный уровень для всех источников.

- **`Override`**  
  - *Тип:* объект  
  - *Описание:* переопределение уровней для конкретных пространств имён:
    - `"Microsoft"` → `"Warning"`
    - `"System"` → `"Warning"`

### 2.2. WriteTo

Список приёмников (sink) для записи логов.

- **Console**  
  *Описание:* вывод логов в консоль.

- **Elasticsearch**  
  *Описание:* отправка логов в Elasticsearch.  
  *Параметры:*
    - `nodeUris` — URI узлов Elasticsearch (пусто по умолчанию).
    - `dataStream` — настройки Data Stream:
      - `type`: `"logs"`
      - `dataset`: `"CottageSensorAggregator"`
      - `namespace`: `"prod"`
    - `indexFormat`: `"logs-cottage-sensor-aggregator-prod-{0:yyyy.MM.dd}"` (формат индекса с датой).
    - `autoRegisterTemplate`: `true` (автоматическая регистрация шаблона индекса).
    - `ecsText`: `true` (использование формата ECS — Elastic Common Schema).

### 2.3. Enrich

Список обогатителей (enrichers) для добавления метаданных в логи:

- `FromLogContext` — данные из контекста логирования.
- `WithMachineName` — имя машины.
- `WithThreadId` — ID потока.

## 3. AllowedHosts

- **`AllowedHosts`**  
  - *Тип:* строка  
  - *Значение:* `"*"`  
  - *Описание:* разрешённые хосты для приёма запросов. Значение `"*"` разрешает все хосты.

## 4. Kestrel (веб‑сервер)

Настройки встроенного сервера Kestrel.

- **`Endpoints.Http`**  
  *Описание:* конфигурация HTTP‑конечной точки.  
  *Параметры:*
    - `Url`: `"http://localhost:9500"` (адрес и порт для прослушивания).

## 5. AppSettings

Пользовательские настройки приложения.

### 5.1. ZontSettings

Настройки для интеграции с системой Zont.

- `Email` — электронная почта для авторизации (пусто по умолчанию).
- `Login` — логин для API (пусто по умолчанию).
- `Password` — пароль для API (пусто по умолчанию).
- `ApiUrl` — URL API Zont (пусто по умолчанию).

## 6. Jwt (настройки JWT‑аутентификации)

Параметры для работы с JWT‑токенами.

- `Issuer` — издатель токенов (пусто по умолчанию).
- `Audience` — аудитория токенов (пусто по умолчанию).
- `Key` — секретный ключ для подписи токенов (пусто по умолчанию).

## Примечания

1. **Пустые значения** (например, `""`) требуют заполнения в рабочей среде.
2. **Безопасность:** поля с паролями и ключами (например, `Jwt.Key`) должны храниться в защищённых хранилищах (например, Azure Key Vault, AWS Secrets Manager).
3. **Elasticsearch:** параметр `nodeUris` необходимо заполнить реальными URI узлов кластера.
4. **Порт Kestrel:** `9500` может быть изменён в зависимости от требований инфраструктуры.

#
>[В начало](#документация-по-конфигурационным-настройкам-приложения)  
>[На главную](../README.md)
